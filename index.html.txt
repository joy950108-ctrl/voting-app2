<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>æ ¡åœ’è¡¨æ¼”æŠ•ç¥¨</title>
  <script type="module" src="firebase.js"></script>
  <style>
    body {
      font-family: Arial;
      text-align: center;
      background: #f8f8f8;
    }
    h1 { margin-top: 30px; }

    .team {
      background: white;
      margin: 20px auto;
      padding: 20px;
      width: 80%;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      cursor: pointer;
      position: relative;
      transition: 0.3s;
    }

    .team:hover {
      transform: scale(1.03);
    }

    .sticker {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
      animation: pop 0.5s ease;
    }

    @keyframes pop {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }

    .disabled {
      pointer-events: none;
      opacity: 0.6;
    }
  </style>
</head>

<body>

<h1>è«‹è²¼è²¼ç´™æŠ•ç¥¨ ðŸ’–</h1>

<div class="team" onclick="vote('teamA')" id="teamA">
  ðŸŽ¤ è¡¨æ¼”åœ˜éšŠ A
</div>

<div class="team" onclick="vote('teamB')" id="teamB">
  ðŸŽ¸ è¡¨æ¼”åœ˜éšŠ B
</div>

<div class="team" onclick="vote('teamC')" id="teamC">
  ðŸ’ƒ è¡¨æ¼”åœ˜éšŠ C
</div>

<script type="module">
import { db, ref, update, increment } from './firebase.js';

window.vote = function(team) {

  if(localStorage.getItem("voted")) {
    alert("ä½ å·²ç¶“æŠ•éŽç¥¨äº†ï¼");
    return;
  }

  update(ref(db, team), {
    votes: increment(1)
  });

  const el = document.getElementById(team);
  const sticker = document.createElement("div");
  sticker.className = "sticker";
  sticker.innerHTML = "ðŸŒŸ";
  el.appendChild(sticker);

  localStorage.setItem("voted", "true");

  document.querySelectorAll('.team').forEach(t => t.classList.add("disabled"));
}
</script>

</body>
</html>